<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Image processing along a time series. — singleband_m2m • vrtility</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Image processing along a time series. — singleband_m2m"><meta name="description" content="singleband_m2m can be used to filter raster time series' or
apply smoothing operations. These functions work on a single band at a time.
composite of a warped VRT collection.
hampel_filter is used tocreate a function to filter band-level
outliers in time-series using the Hampel filter. to be provided to
singleband_m2m()."><meta property="og:description" content="singleband_m2m can be used to filter raster time series' or
apply smoothing operations. These functions work on a single band at a time.
composite of a warped VRT collection.
hampel_filter is used tocreate a function to filter band-level
outliers in time-series using the Hampel filter. to be provided to
singleband_m2m()."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">vrtility</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.8.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/HLS.html">Harmonized Landsat Sentinel-2</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Permian-Global-Research/vrtility/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Image processing along a time series.</h1>
      <small class="dont-index">Source: <a href="https://github.com/Permian-Global-Research/vrtility/blob/main/R/singleband-many-to-many.R" class="external-link"><code>R/singleband-many-to-many.R</code></a></small>
      <div class="d-none name"><code>singleband-many-to-many.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>singleband_m2m</code> can be used to filter raster time series' or
apply smoothing operations. These functions work on a single band at a time.
composite of a warped VRT collection.</p>
<p><code>hampel_filter</code> is used tocreate a function to filter band-level
outliers in time-series using the Hampel filter. to be provided to
<code>singleband_m2m()</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">singleband_m2m</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">m2m_fun</span>,</span>
<span>  <span class="va">outfile</span>,</span>
<span>  <span class="va">apply_scale</span>,</span>
<span>  <span class="va">config_options</span>,</span>
<span>  <span class="va">creation_options</span>,</span>
<span>  <span class="va">quiet</span>,</span>
<span>  <span class="va">nsplits</span>,</span>
<span>  <span class="va">recollect</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">hampel_filter</span><span class="op">(</span>k <span class="op">=</span> <span class="fl">1L</span>, t0 <span class="op">=</span> <span class="fl">3</span>, impute_na <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A vrt_collection_warped object.</p></dd>


<dt id="arg-m-m-fun">m2m_fun<a class="anchor" aria-label="anchor" href="#arg-m-m-fun"></a></dt>
<dd><p>A function to apply to the data. This function should take a
matrix as input and return a matrix as output. The function should be
vectorized over the rows of the matrix, where each row represents a
time and columns represent pixels. calcualtions are done at the band level.</p></dd>


<dt id="arg-outfile">outfile<a class="anchor" aria-label="anchor" href="#arg-outfile"></a></dt>
<dd><p>The output file path.</p></dd>


<dt id="arg-apply-scale">apply_scale<a class="anchor" aria-label="anchor" href="#arg-apply-scale"></a></dt>
<dd><p>Logical indicating whether to apply the scale values
(if they exist) to the data.</p></dd>


<dt id="arg-config-options">config_options<a class="anchor" aria-label="anchor" href="#arg-config-options"></a></dt>
<dd><p>A named character vector of GDAL configuration options.</p></dd>


<dt id="arg-creation-options">creation_options<a class="anchor" aria-label="anchor" href="#arg-creation-options"></a></dt>
<dd><p>A named character vector of GDAL creation options.</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>Logical indicating whether to suppress the progress bar.</p></dd>


<dt id="arg-nsplits">nsplits<a class="anchor" aria-label="anchor" href="#arg-nsplits"></a></dt>
<dd><p>The number of splits to use for the tiling. If NULL, the
function will automatically determine the number of splits based on the
dimensions of the input data, available memory and the number of active
mirai daemons. see details</p></dd>


<dt id="arg-recollect">recollect<a class="anchor" aria-label="anchor" href="#arg-recollect"></a></dt>
<dd><p>A logical indicating whether to return the output as a
vrt_block or vrt_collection object. default is FALSE and the output is a
character string of the output file path.</p></dd>


<dt id="arg-k">k<a class="anchor" aria-label="anchor" href="#arg-k"></a></dt>
<dd><p>The number of neighboring points to consider on each side of the
current point. window length 2*k+1 in indices.</p></dd>


<dt id="arg-t-">t0<a class="anchor" aria-label="anchor" href="#arg-t-"></a></dt>
<dd><p>threshold, default is 3 (Pearson's rule), see below.</p></dd>


<dt id="arg-impute-na">impute_na<a class="anchor" aria-label="anchor" href="#arg-impute-na"></a></dt>
<dd><p>Logical indicating whether to impute NA values. If <code>TRUE</code>,
the function will impute NA values using the nearest prior non-NA value. If
<code>FALSE</code>, NA values will be returned in their original positions.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A character vector of the output file path.</p>
<p>A function to be used with <code>singleband_m2m()</code> to remove outliers
from a raster time series.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>We have a lot TODO: here...</p>
<p>(details from the <code>hampel</code>) The ‘median absolute deviation’ computation is
done in the (-k...k) vicinity of each point at least k steps away from the
end points of the interval. At the lower and upper end the time series values
are preserved.</p>
<p>A high threshold makes the filter more forgiving, a low one will declare
more points to be outliers. t0&lt;-3 (the default) corresponds to Ron Pearson's
3 sigma edit rule, t0&lt;-0 to John Tukey's median filter.</p>
<p>The implementation of the hampel filter is based on the pracma package but
implemented in C++. It also handles NA values differently, First, NA values
are removed from the data before applying the filter. If <code>impute_na</code> is
<code>TRUE</code>, the function will impute NA values using the nearest prior non-NA
value. If <code>impute_na</code> is <code>FALSE</code>, NA values will be returned in their
original positions.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Hugh Graham.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

