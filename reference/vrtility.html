<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>vrtility: GDAL VRT utilities for R — vrtility • vrtility</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="vrtility: GDAL VRT utilities for R — vrtility"><meta name="description" content="vrtility leverages GDAL's VRT (Virtual Raster) capabilities to
build efficient raster processing pipelines, with a focus on Earth Observation
applications. The package uses a modular design based on nested VRTs, enabling
complex image processing tasks such as cloud masking, multi-temporal compositing,
and time series filtering.
Key features include:
Cloud masking via VRT pixel functions (Python/NumPy or GDAL/muparser)
Multi-band compositing methods (median, geomedian, medoid) that
maintain spectral consistency
Time series filtering (e.g. Hampel filter) for temporal noise reduction
Efficient parallel processing via mirai
Direct integration with STAC catalogs for cloud-native workflows


Powered by gdalraster."><meta property="og:description" content="vrtility leverages GDAL's VRT (Virtual Raster) capabilities to
build efficient raster processing pipelines, with a focus on Earth Observation
applications. The package uses a modular design based on nested VRTs, enabling
complex image processing tasks such as cloud masking, multi-temporal compositing,
and time series filtering.
Key features include:
Cloud masking via VRT pixel functions (Python/NumPy or GDAL/muparser)
Multi-band compositing methods (median, geomedian, medoid) that
maintain spectral consistency
Time series filtering (e.g. Hampel filter) for temporal noise reduction
Efficient parallel processing via mirai
Direct integration with STAC catalogs for cloud-native workflows


Powered by gdalraster."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">vrtility</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/cdse-sentinel-2.html">Copernicus Data Space Ecosystem Sentinel-2</a></li>
    <li><a class="dropdown-item" href="../articles/data-structures-and-terminology.html">Data Structures and Terminology</a></li>
    <li><a class="dropdown-item" href="../articles/Digital-Earth-Africa-GeoMAD.html">Digital Earth Africa GeoMAD</a></li>
    <li><a class="dropdown-item" href="../articles/EOPF.html">EOPF Sentinel-2 Level-2A</a></li>
    <li><a class="dropdown-item" href="../articles/HLS.html">Harmonized Landsat Sentinel-2</a></li>
    <li><a class="dropdown-item" href="../articles/ndvi-timeseries.html">Creating NDVI Time Series from HLS Data</a></li>
    <li><a class="dropdown-item" href="../articles/OmniCloudMask.html">OmniCloudMask</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Permian-Global-Research/vrtility/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>vrtility: GDAL VRT utilities for R</h1>
      <small class="dont-index">Source: <a href="https://github.com/Permian-Global-Research/vrtility/blob/main/R/vrtility-package.R" class="external-link"><code>R/vrtility-package.R</code></a></small>
      <div class="d-none name"><code>vrtility.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>vrtility leverages GDAL's VRT (Virtual Raster) capabilities to
build efficient raster processing pipelines, with a focus on Earth Observation
applications. The package uses a modular design based on nested VRTs, enabling
complex image processing tasks such as cloud masking, multi-temporal compositing,
and time series filtering.</p>
<p>Key features include:</p><ul><li><p>Cloud masking via VRT pixel functions (Python/NumPy or GDAL/muparser)</p></li>
<li><p>Multi-band compositing methods (median, geomedian, medoid) that
maintain spectral consistency</p></li>
<li><p>Time series filtering (e.g. Hampel filter) for temporal noise reduction</p></li>
<li><p>Efficient parallel processing via <a href="https://mirai.r-lib.org/index.html" class="external-link">mirai</a></p></li>
<li><p>Direct integration with STAC catalogs for cloud-native workflows</p></li>
</ul><p>Powered by <a href="https://firelab.github.io/gdalraster/" class="external-link">gdalraster</a>.</p>
    </div>


    <div class="section level2">
    <h2 id="vrt-core-functions">VRT Core Functions<a class="anchor" aria-label="anchor" href="#vrt-core-functions"></a></h2>


<dl><dt><code><a href="vrt_collect.html">vrt_collect</a></code></dt>
<dd><p>Create a vrt_collection object from STAC items or file paths</p></dd>

<dt><code><a href="vrt_plan.html">vrt_plan</a></code></dt>
<dd><p>Create a lightweight metadata plan from STAC items (for optimized warping)</p></dd>

<dt><code><a href="vrt_warp.html">vrt_warp</a></code></dt>
<dd><p>Warp a vrt_x object to a common grid</p></dd>

<dt><code><a href="vrt_stack.html">vrt_stack</a></code></dt>
<dd><p>Create a vrt_stack object from a warped collection</p></dd>

<dt><code><a href="vrt_compute.html">vrt_compute</a></code></dt>
<dd><p>Compute a vrt pipeline (materialize to disk)</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="vrt-pixel-functions">VRT Pixel Functions<a class="anchor" aria-label="anchor" href="#vrt-pixel-functions"></a></h2>


<dl><dt><code><a href="vrt_set_gdal_pixelfun.html">vrt_set_gdal_pixelfun</a></code></dt>
<dd><p>Set a GDAL built-in pixel function for a vrt stack object</p></dd>

<dt><code><a href="vrt_set_py_pixelfun.html">vrt_set_py_pixelfun</a></code></dt>
<dd><p>Set a Python pixel function for a vrt stack object</p></dd>

<dt><code><a href="vrt_derived_block.html">vrt_derived_block</a></code></dt>
<dd><p>Create derived bands using muparser expressions</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="image-masking">Image Masking<a class="anchor" aria-label="anchor" href="#image-masking"></a></h2>


<dl><dt><code><a href="vrt_set_maskfun.html">vrt_set_maskfun</a></code></dt>
<dd><p>Set a mask function for a vrt object</p></dd>

<dt><code><a href="vrt_create_mask.html">vrt_create_mask</a></code></dt>
<dd><p>Create a mask for a vrt object</p></dd>

<dt><code><a href="vrt_set_maskfun.html">build_intmask</a></code></dt>
<dd><p>Build a mask from integer values (auto-selects muparser or Python)</p></dd>

<dt><code><a href="vrt_set_maskfun.html">build_bitmask</a></code></dt>
<dd><p>Build a mask from bit positions (auto-selects muparser or Python)</p></dd>

<dt><code><a href="vrt_create_mask.html">create_omnicloudmask</a></code></dt>
<dd><p>Create a cloud mask using the omnicloudmask algorithm</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="vrt-helpers">VRT Helpers<a class="anchor" aria-label="anchor" href="#vrt-helpers"></a></h2>


<dl><dt><code><a href="vrt_set_band_names.html">vrt_set_band_names</a></code></dt>
<dd><p>Set band names for a vrt_x object</p></dd>

<dt><code><a href="vrt_save.html">vrt_save</a></code></dt>
<dd><p>Save a VRT object to a file</p></dd>

<dt><code><a href="vrt_add_empty_band.html">vrt_add_empty_band</a></code></dt>
<dd><p>Add an empty band to a vrt_x object</p></dd>

<dt><code><a href="vrt_move_band.html">vrt_move_band</a></code></dt>
<dd><p>Move a band in a vrt_x object</p></dd>

<dt><code><a href="vrt_set_scale.html">vrt_set_scale</a></code></dt>
<dd><p>Set the scale and offset values for a vrt_x object</p></dd>

<dt><code><a href="vrt_set_nodata.html">vrt_set_nodata</a></code></dt>
<dd><p>Set the nodata value for a vrt_x object</p></dd>

<dt><code><a href="vrt_tools.html">vrt_schema</a></code></dt>
<dd><p>(data object) The official GDAL VRT schema</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="multi-band-reduction-functions">Multi-band Reduction Functions<a class="anchor" aria-label="anchor" href="#multi-band-reduction-functions"></a></h2>


<dl><dt><code><a href="multiband_reduce.html">multiband_reduce</a></code></dt>
<dd><p>Create composite reductions that require all bands</p></dd>

<dt><code><a href="multiband_reduce.html">geomedian</a></code></dt>
<dd><p>A geometric median reducer function</p></dd>

<dt><code><a href="multiband_reduce.html">medoid</a></code></dt>
<dd><p>A medoid reducer function</p></dd>

<dt><code><a href="multiband_reduce.html">geomedoid</a></code></dt>
<dd><p>A geometric medoid reducer function</p></dd>

<dt><code><a href="multiband_reduce.html">quantoid</a></code></dt>
<dd><p>A quantoid reducer function</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="single-band-many-to-many-functions">Single-band Many-to-Many Functions<a class="anchor" aria-label="anchor" href="#single-band-many-to-many-functions"></a></h2>


<dl><dt><code><a href="singleband-many-to-many.html">singleband_m2m</a></code></dt>
<dd><p>Apply single-band many-to-many operations (e.g. outlier filtering)</p></dd>

<dt><code><a href="singleband-many-to-many.html">hampel_filter</a></code></dt>
<dd><p>Hampel filter for outlier detection</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="gdal-configuration">GDAL Configuration<a class="anchor" aria-label="anchor" href="#gdal-configuration"></a></h2>


<dl><dt><code><a href="gdal_options.html">gdal_config_options</a></code></dt>
<dd><p>Set GDAL configuration options for HTTP, caching, etc.</p></dd>

<dt><code><a href="gdal_options.html">set_gdal_config</a></code></dt>
<dd><p>Apply GDAL configuration options</p></dd>

<dt><code><a href="gdal_options.html">gdal_creation_options</a></code></dt>
<dd><p>Set GDAL creation options for output files</p></dd>

<dt><code><a href="gdal_options.html">gdalwarp_options</a></code></dt>
<dd><p>Set gdalwarp-specific options</p></dd>

<dt><code><a href="gdal_options.html">set_gdal_cache_max</a></code></dt>
<dd><p>Set GDAL cache size as a fraction of system RAM</p></dd>

<dt><code><a href="gdal_options.html">gdal_raster_drivers</a></code></dt>
<dd><p>List available GDAL raster drivers</p></dd>

<dt><code><a href="gdal_options.html">check_muparser</a></code></dt>
<dd><p>Check if GDAL muparser support is available</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="python-integration">Python Integration<a class="anchor" aria-label="anchor" href="#python-integration"></a></h2>


<dl><dt><code><a href="vrtility_python.html">compute_with_py_env</a></code></dt>
<dd><p>Execute code with vrtility Python environment</p></dd>

<dt><code><a href="vrtility_python.html">set_py_env_vals</a></code></dt>
<dd><p>Set Python environment variables as options</p></dd>

<dt><code><a href="vrtility_python.html">vrtility_py_require</a></code></dt>
<dd><p>Require Python packages for vrtility</p></dd>

<dt><code><a href="vrt_set_py_pixelfun.html">median_numpy</a></code></dt>
<dd><p>A Python pixel function to compute the median</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="stac-functions">STAC Functions<a class="anchor" aria-label="anchor" href="#stac-functions"></a></h2>


<dl><dt><code><a href="stac_utilities.html">stac_query</a></code></dt>
<dd><p>Query a STAC catalog</p></dd>

<dt><code><a href="stac_utilities.html">sentinel2_stac_query</a></code></dt>
<dd><p>Query a STAC catalog for Sentinel-2 data</p></dd>

<dt><code><a href="stac_utilities.html">hls_stac_query</a></code></dt>
<dd><p>Query a STAC catalog for HLS data</p></dd>

<dt><code><a href="stac_utilities.html">sentinel1_stac_query</a></code></dt>
<dd><p>Query a STAC catalog for Sentinel-1 data</p></dd>

<dt><code><a href="stac_utilities.html">stac_cloud_filter</a></code></dt>
<dd><p>Filter a STAC collection for cloud cover</p></dd>

<dt><code><a href="stac_utilities.html">stac_orbit_filter</a></code></dt>
<dd><p>Filter a STAC collection for orbit state</p></dd>

<dt><code><a href="stac_utilities.html">sign_mpc_items</a></code></dt>
<dd><p>Sign STAC items from Microsoft Planetary Computer</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="raster-visualisation">Raster Visualisation<a class="anchor" aria-label="anchor" href="#raster-visualisation"></a></h2>


<dl><dt><code><a href="plot_raster.html">plot_raster_src</a></code></dt>
<dd><p>Plot a raster source (file path or VRT)</p></dd>

<dt><code><a href="plot_raster.html">plot.vrt_block</a></code></dt>
<dd><p>Plot method for vrt_block objects</p></dd>

<dt><code><a href="plot_raster.html">plot.vrt_collection</a></code></dt>
<dd><p>Plot method for vrt_collection objects</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="cache-management">Cache Management<a class="anchor" aria-label="anchor" href="#cache-management"></a></h2>


<dl><dt><code><a href="vrt_cache_management.html">vrt_cache_destroy</a></code></dt>
<dd><p>Destroy the vrtility cache directory</p></dd>

<dt><code><a href="vrt_cache_management.html">vrt_cache_set</a></code></dt>
<dd><p>Set the vrtility cache directory</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="parallel-processing">Parallel Processing<a class="anchor" aria-label="anchor" href="#parallel-processing"></a></h2>


<dl><dt><code><a href="mirai-mgmt.html">n_daemons</a></code></dt>
<dd><p>Get the number of mirai daemons running</p></dd>

<dt><code><a href="mirai-mgmt.html">daemons_load_vrtility</a></code></dt>
<dd><p>Load vrtility Python environment in mirai daemons</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="spatial-helpers">Spatial Helpers<a class="anchor" aria-label="anchor" href="#spatial-helpers"></a></h2>


<dl><dt><code><a href="spatial_helpers.html">bbox_to_projected</a></code></dt>
<dd><p>Convert a long/lat bounding box to a projected bounding box</p></dd>

<dt><code><a href="spatial_helpers.html">ogr_bbox_from_file</a></code></dt>
<dd><p>Get a bounding box from a vector file</p></dd>

<dt><code><a href="spatial_helpers.html">ogr_srs_from_file</a></code></dt>
<dd><p>Get a spatial reference system from a vector file</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="gdalraster-helpers">gdalraster Helpers<a class="anchor" aria-label="anchor" href="#gdalraster-helpers"></a></h2>


<dl><dt><code><a href="gdalraster-helpers.html">r_to_MEM</a></code></dt>
<dd><p>Convert a vector to a GDALRasterDataset in memory</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="https://radiantearth.github.io/stac-browser/#/external/cmr.earthdata.nasa.gov/stac/LPCLOUD/" class="external-link">LPCLOUD STAC Browser</a></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p><strong>Maintainer</strong>: Hugh Graham <a href="mailto:hugh.graham@permianglobal.com">hugh.graham@permianglobal.com</a> (<a href="https://orcid.org/0000-0001-9451-5010" class="external-link">ORCID</a>)</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Hugh Graham.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

