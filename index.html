<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>R package for efficient raster processing using GDAL VRTs • vrtility</title>
<script src="lightswitch.js"></script><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="R package for efficient raster processing using GDAL VRTs">
<meta name="description" content="R package for efficient raster processing with GDAL VRTs.">
<meta property="og:description" content="R package for efficient raster processing with GDAL VRTs.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">vrtility</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/cdse-sentinel-2.html">Copernicus Data Space Ecosystem Sentinel-2</a></li>
    <li><a class="dropdown-item" href="articles/data-structures-and-terminology.html">Data Structures and Terminology</a></li>
    <li><a class="dropdown-item" href="articles/Digital-Earth-Africa-GeoMAD.html">Digital Earth Africa GeoMAD</a></li>
    <li><a class="dropdown-item" href="articles/EOPF.html">EOPF Sentinel-2 Level-2A</a></li>
    <li><a class="dropdown-item" href="articles/HLS.html">Harmonized Landsat Sentinel-2</a></li>
    <li><a class="dropdown-item" href="articles/ndvi-timeseries.html">Creating NDVI Time Series from HLS Data</a></li>
    <li><a class="dropdown-item" href="articles/OmniCloudMask.html">OmniCloudMask</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Permian-Global-Research/vrtility/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="vrtility-">vrtility <a href="https://permian-global-research.github.io/vrtility/" alt="vrtility"><img src="reference/figures/vrtility_hex.png" alt="vrtility logo" align="right" width="200"></a>
<a class="anchor" aria-label="anchor" href="#vrtility-"></a>
</h1></div>
<!-- badges: start -->

<p>vrtility is an R package that aims to make the best use of <a href="https://gdal.org/en/stable/index.html" class="external-link">GDAL</a>’s <a href="https://gdal.org/en/stable/drivers/raster/vrt.html" class="external-link">VRT</a> capabilities for efficient processing of large raster datasets - mainly with Earth Observation (EO) in mind. vrtility uses the VRT format to access awesome features such as pixel functions but also harnesses the VRT data structure to facilitate complex image processing tasks such as multi-band compositing and time series filtering.</p>
<blockquote>
<p>[!NOTE] This package is under active development and is likely to change. Contributions and suggestions are still very welcome!</p>
</blockquote>
<div class="section level2">
<h2 id="features">Features<a class="anchor" aria-label="anchor" href="#features"></a>
</h2>
<ul>
<li><p>Modular design: We’re basically creating remote sensing pipelines using nested VRTs. This allows for the easy addition of new pixel and masking functions. but could easily be adapted for deriving spectral indices or calculating complex time series functions. All powered by <a href="https://usdaforestservice.github.io/gdalraster/index.html" class="external-link">{gdalraster}</a>.</p></li>
<li><p>vrtility enables the use of GDAL VRT python and built-in (C++) pixel functions. The python <a href="https://numpy.org/" class="external-link">numpy</a>-based pixel functions can be used to apply cloud masks and summarise pixel values (e.g. median) from multiple images (i.e create a composite image). All python environment and package management is handled by <a href="https://rstudio.github.io/reticulate/" class="external-link">{reticulate}</a>. Built-In GDAL pixel functions vary depending on the GDAL version, but are highly performant - recent GDAL versions even support <a href="https://mirai.r-lib.org/index.html" class="external-link">expressions</a> for more complex operations.</p></li>
<li><p>Efficient parallel processing using <a href="https://mirai.r-lib.org/index.html" class="external-link">{mirai}</a></p></li>
<li><p>Advanced compositing methods that maintain spectral consistency, such as the geometric median and medoid.</p></li>
<li><p>Time series filtering functions to improve temporal consistency and reduce noise.</p></li>
<li><p>on-the-fly cloud mask filtering using pixel functions. Ability to use <a href="https://github.com/DPIRD-DMA/OmniCloudMask" class="external-link">OmniCloudMask</a> cloud/shadow masking, embedded within the vrt pipeline.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install vrtility from GitHub with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pkg_install.html" class="external-link">pkg_install</a></span><span class="op">(</span><span class="st">"Permian-Global-Research/vrtility"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>Here is a simple example where we:</p>
<ol style="list-style-type: decimal">
<li><p>Define a bounding box and search a STAC catalog for Sentinel-2 data</p></li>
<li><p>Create a <code>vrt_collection</code> object - essentially a list of individual VRTs (each making up one image) which we refer to as <code>vrt_block</code>s in this package.</p></li>
<li><p>Then, we apply the mask using pixel functions. This simply modifies the XML of the VRT “blocks”.</p></li>
<li><p>Because this set of images have more than one common spatial reference system (SRS) we warp the <code>vrt_block</code>s to a new spatially-aligned <code>vrt_collection</code> using <code>vrt_warp</code>, giving us a <code>vrt_collection_warped</code> object. Note that we use the argument <code>lazy = FALSE</code> to force GDAL to create the warped VRTs immediately (i.e. saving to disk as tif files). For remote data sources this will be (much) faster.</p></li>
<li><p>These images are then “stacked” (combined into a single VRT with multiple layers in each VRTRasterBand), giving us a <code>vrt_stack</code> object.</p></li>
<li><p>A median pixel function is then added to the <code>vrt_stack</code>.</p></li>
<li><p>Finally, we calculate the median composite using <code>vrt_compute</code> with the <code>gdalraster</code> engine to write the output which, in combination with the mirai package processes the data in parallel across bands and image tiles.</p></li>
</ol>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://permian-global-research.github.io/vrtility/">vrtility</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; ✔ Using GDAL version 3.12.0</span></span>
<span><span class="co">#&gt; ℹ GDAL_CACHEMAX set to 6.247 GiB; to change this use</span></span>
<span><span class="co">#&gt;   vrtility::set_gdal_cache_max()</span></span>
<span><span class="co">#  Set up asynchronous workers to parallelise vrt_collect and vrt_set_maskfun</span></span>
<span><span class="fu">mirai</span><span class="fu">::</span><span class="fu"><a href="https://mirai.r-lib.org/reference/daemons.html" class="external-link">daemons</a></span><span class="op">(</span><span class="fl">8</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/mirai-mgmt.html">daemons_load_vrtility</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">bbox</span> <span class="op">&lt;-</span> <span class="fu">gdalraster</span><span class="fu">::</span><span class="fu"><a href="https://usdaforestservice.github.io/gdalraster/reference/bbox_from_wkt.html" class="external-link">bbox_from_wkt</a></span><span class="op">(</span></span>
<span>  wkt <span class="op">=</span> <span class="st">"POINT (144.3 -7.6)"</span>,</span>
<span>  extend_x <span class="op">=</span> <span class="fl">0.17</span>,</span>
<span>  extend_y <span class="op">=</span> <span class="fl">0.125</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">te</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/spatial_helpers.html">bbox_to_projected</a></span><span class="op">(</span><span class="va">bbox</span><span class="op">)</span></span>
<span><span class="va">trs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">te</span>, <span class="st">"wkt"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">s2_stac</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/stac_utilities.html">hls_stac_query</a></span><span class="op">(</span></span>
<span>  bbox <span class="op">=</span> <span class="va">bbox</span>,</span>
<span>  start_date <span class="op">=</span> <span class="st">"2023-01-01"</span>,</span>
<span>  end_date <span class="op">=</span> <span class="st">"2023-12-31"</span>,</span>
<span>  stac_source <span class="op">=</span> <span class="st">"https://planetarycomputer.microsoft.com/api/stac/v1/"</span>,</span>
<span>  collection <span class="op">=</span> <span class="st">"hls2-s30"</span>,</span>
<span>  max_cloud_cover <span class="op">=</span> <span class="fl">40</span>,</span>
<span>  assets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"B02"</span>, <span class="st">"B03"</span>, <span class="st">"B04"</span>, <span class="st">"Fmask"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># number of items:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">s2_stac</span><span class="op">$</span><span class="va">features</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 10</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="va">median_composite</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/vrt_collect.html">vrt_collect</a></span><span class="op">(</span><span class="va">s2_stac</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="reference/vrt_set_maskfun.html">vrt_set_maskfun</a></span><span class="op">(</span></span>
<span>      mask_band <span class="op">=</span> <span class="st">"Fmask"</span>,</span>
<span>      mask_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>      build_mask_pixfun <span class="op">=</span> <span class="fu"><a href="reference/vrt_set_maskfun.html">build_bitmask</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="reference/vrt_warp.html">vrt_warp</a></span><span class="op">(</span>t_srs <span class="op">=</span> <span class="va">trs</span>, te <span class="op">=</span> <span class="va">te</span>, tr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">30</span>, <span class="fl">30</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="reference/vrt_stack.html">vrt_stack</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="reference/vrt_set_py_pixelfun.html">vrt_set_py_pixelfun</a></span><span class="op">(</span>pixfun <span class="op">=</span> <span class="fu"><a href="reference/vrt_set_py_pixelfun.html">median_numpy</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="co"># vrt_set_gdal_pixelfun(pixfun = "median") # if using GDAL &gt;= 3.12.0</span></span>
<span>    <span class="fu"><a href="reference/vrt_compute.html">vrt_compute</a></span><span class="op">(</span></span>
<span>      engine <span class="op">=</span> <span class="st">"gdalraster"</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="co">#&gt;    user  system elapsed </span></span>
<span><span class="co">#&gt;   1.121   0.139   5.578</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="reference/plot_raster.html">plot_raster_src</a></span><span class="op">(</span></span>
<span>  <span class="va">median_composite</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-example1-1.png" width="100%"></p>
</div>
<div class="section level2">
<h2 id="asynchronous-downloadprocessing">Asynchronous download/processing<a class="anchor" aria-label="anchor" href="#asynchronous-downloadprocessing"></a>
</h2>
<p>{vrtility} uses {mirai}, alongside {purrr} to manage asynchronous parallel processing. By setting <code>mirai::daemons(n)</code> before running the vrt pipeline, we can often improve performance, depending on the speed of the server holding the data. In order to use asynchronous processing, in the <code>vrt_compute</code> function, we must set <code>engine = "gdalraster"</code> or we can use <code>engine = "warp"</code> if we are computing a <code>vrt_collection</code> (multiple discrete images). It is strongly recommended to use multi-processing, especially for multi-band reduction methods (i.e. <code>multiband_reduce</code>).</p>
</div>
<div class="section level2">
<h2 id="direct-file-access-for-on-disk-or-remote-rasters">Direct file access for on-disk or remote rasters<a class="anchor" aria-label="anchor" href="#direct-file-access-for-on-disk-or-remote-rasters"></a>
</h2>
<p>We can also directly access raster files (or indeed remote files as urls) too, as shown here with this example dataset - note that the inputs have multiple spatial reference systems and therefore we need to warp them (as in the above example) before stacking or applying any reduction-type function.</p>
<p>In this example, we create a <code>medoid</code> composite from the warped collection. Using medoid or other multi-band pixel functions (e.g. <code>geomedian</code>) can be extremely powerful but requires more compute than band-wise pixel functions.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">s2files</span> <span class="op">&lt;-</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/dir_ls.html" class="external-link">dir_ls</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"s2-data"</span>, package <span class="op">=</span> <span class="st">"vrtility"</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span></span>
<span></span>
<span><span class="va">ex_collect</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/vrt_collect.html">vrt_collect</a></span><span class="op">(</span><span class="va">s2files</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ex_collect_mask</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/vrt_set_maskfun.html">vrt_set_maskfun</a></span><span class="op">(</span></span>
<span>  <span class="va">ex_collect</span>,</span>
<span>  mask_band <span class="op">=</span> <span class="st">"SCL"</span>,</span>
<span>  mask_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">8</span>, <span class="fl">9</span>, <span class="fl">10</span>, <span class="fl">11</span><span class="op">)</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">walk</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="va">ex_collect</span><span class="op">$</span><span class="va">n_items</span><span class="op">)</span>,</span>
<span>  <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">ex_collect</span>, item <span class="op">=</span> <span class="va">.x</span>, bands <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-example2-1.png" width="100%"></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">walk</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="va">ex_collect_mask</span><span class="op">$</span><span class="va">n_items</span><span class="op">)</span>,</span>
<span>  <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">ex_collect_mask</span>, item <span class="op">=</span> <span class="va">.x</span>, bands <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-example2-2.png" width="100%"></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># extract a block to use as a template for warping</span></span>
<span><span class="va">t_block</span> <span class="op">&lt;-</span> <span class="va">ex_collect</span><span class="op">$</span><span class="va">vrt</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="va">ex_composite</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/vrt_warp.html">vrt_warp</a></span><span class="op">(</span></span>
<span>  <span class="va">ex_collect_mask</span>,</span>
<span>  t_srs <span class="op">=</span> <span class="va">t_block</span><span class="op">$</span><span class="va">srs</span>,</span>
<span>  te <span class="op">=</span> <span class="va">t_block</span><span class="op">$</span><span class="va">bbox</span>,</span>
<span>  tr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">20</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/vrt_set_scale.html">vrt_set_scale</a></span><span class="op">(</span>scale_value <span class="op">=</span> <span class="fl">0.0001</span>, offset <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span>, band_idx <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/multiband_reduce.html">multiband_reduce</a></span><span class="op">(</span>reduce_fun <span class="op">=</span> <span class="fu"><a href="reference/multiband_reduce.html">medoid</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">walk</a></span><span class="op">(</span></span>
<span>  <span class="fl">1</span><span class="op">:</span><span class="fl">4</span>,</span>
<span>  <span class="op">~</span> <span class="fu"><a href="reference/plot_raster.html">plot_raster_src</a></span><span class="op">(</span><span class="va">ex_composite</span>, bands <span class="op">=</span> <span class="va">.x</span>, minmax_pct_cut <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">98</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-example2-3.png" width="100%"></p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/Permian-Global-Research/vrtility/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/Permian-Global-Research/vrtility/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>Apache License (&gt;= 2)</small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing vrtility</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Hugh Graham <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-9451-5010" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
<li><a href="https://github.com/Permian-Global-Research/vrtility/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/Permian-Global-Research/vrtility/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/Permian-Global-Research/vrtility?branch=main" class="external-link"><img src="https://codecov.io/gh/Permian-Global-Research/vrtility/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Hugh Graham.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
