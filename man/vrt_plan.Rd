% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/vrt-plan.R
\name{vrt_plan}
\alias{vrt_plan}
\alias{vrt_plan.doc_items}
\title{Create a VRT execution plan from STAC items}
\usage{
vrt_plan(x, vsi_prefix = "", driver = "", ...)

\method{vrt_plan}{doc_items}(x, vsi_prefix = "", driver = "", ...)
}
\arguments{
\item{x}{A \code{doc_items} object from rstac.}

\item{vsi_prefix}{Character string specifying the GDAL virtual file system
prefix (e.g., "/vsicurl/", "/vsis3/"). Default is empty string which lets
rstac determine the appropriate prefix.}

\item{driver}{Character string specifying a driver prefix to prepend to
source paths.}

\item{...}{Additional arguments (unused).}
}
\value{
A \code{vrt_plan} object containing:
\describe{
\item{sources}{List of items, each containing source URLs per asset}
\item{assets}{Character vector of asset/band names}
\item{date_time}{Character vector of datetimes (one per item)}
\item{n_items}{Number of items in the plan}
\item{vsi_prefix}{VSI prefix used}
\item{driver}{Driver prefix used}
\item{config_options}{GDAL configuration options}
}
}
\description{
\code{vrt_plan()} creates a lightweight metadata structure from rstac items
without creating VRT files. This plan can be passed directly to
\code{\link[=vrt_warp]{vrt_warp()}} for efficient processing, skipping the intermediate VRT
creation step that \code{\link[=vrt_collect]{vrt_collect()}} performs.
}
\details{
Unlike \code{\link[=vrt_collect]{vrt_collect()}}, \code{vrt_plan()} does not create any VRT files or make
GDAL calls to read spatial metadata. This makes it faster when you intend
to immediately warp the data to a common grid.

The trade-off is that spatial metadata (CRS, bounding box, resolution) is
not available until warping occurs. Use \code{\link[=vrt_collect]{vrt_collect()}} if you need to
inspect or use the source spatial properties before warping.
}
\examples{
\donttest{
# Query STAC items
items <- sentinel2_stac_query(
  bbox = c(-12.5, -37.5, -12.0, -37.0),
  start_date = "2023-01-01",
  end_date = "2023-01-31",
  max_cloud_cover = 10,
  assets = c("B02", "B03", "B04", "SCL")
)

# Create plan (fast, no VRT creation)
plan <- vrt_plan(items)

# Warp directly from plan
warped <- vrt_warp(
  plan,
  t_srs = "EPSG:32724",
  te = c(700000, 5850000, 710000, 5860000),
  tr = c(10, 10)
)
}

}
\seealso{
\code{\link[=vrt_collect]{vrt_collect()}} for full VRT creation, \code{\link[=vrt_warp]{vrt_warp()}} for warping
}
